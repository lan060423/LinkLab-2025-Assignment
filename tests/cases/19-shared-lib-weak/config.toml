[meta]
name = "Weak Symbol Export"
description = "Test weak symbol export in shared library"
score = 7

[[run]]
name = "Compile library source"
command = "${root_dir}/cc"
args = ["${test_dir}/weak.c", "-o", "${build_dir}/weak.o", "-g", "-Os"]
[run.check]
files = ["${build_dir}/weak.fo"]
return_code = 0

[[run]]
name = "Link shared library"
command = "${root_dir}/ld"
args = ["-shared", "${build_dir}/weak.fo", "-o", "${build_dir}/libweak.so"]
[run.check]
files = ["${build_dir}/libweak.so"]
return_code = 0

[[run]]
name = "Verify weak symbol export"
command = "echo"
args = ["verifying"]
score = 7
[run.check]
special_judge = "judge.py"
